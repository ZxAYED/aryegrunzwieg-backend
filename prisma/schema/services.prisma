model Service {
  id        String   @id @default(uuid())
  name      String
  category  String
  basePrice Decimal  @db.Decimal(10, 2)
  status    ServiceStatus @default(ACTIVE)

  commonIssues String[] // ok for now (small data + admin-managed)


  specializations ServiceSpecialization[]
  specializationId String?
  specialization   Specialization? @relation("PrimaryServiceSpecialization", fields: [specializationId], references: [id], onDelete: SetNull)

  orders Order[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([status])
  @@index([category])
  @@index([name])
  @@index([specializationId])
}

model ServiceSpecialization {
  serviceId        String
  specializationId String

  service        Service         @relation(fields: [serviceId], references: [id], onDelete: Cascade)
  specialization Specialization  @relation(fields: [specializationId], references: [id], onDelete: Cascade)

  @@id([serviceId, specializationId])
  @@index([specializationId])
}
